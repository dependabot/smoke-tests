input:
  job:
    package-manager: composer
    allowed-updates:
      - update-type: all
    dependency-groups:
      - name: phpstan
        rules:
          patterns:
            - phpstan/*
    experiments:
      grouped-updates-prototype: true
      record-ecosystem-versions: true
    ignore-conditions:
      - dependency-name: phpstan/phpstan
        source: tests/smoke-composer.yaml
        version-requirement: '>1.10.25'
      - dependency-name: phpstan/phpstan-strict-rules
        source: tests/smoke-composer.yaml
        version-requirement: '>1.5.1'
      - dependency-name: phpmailer/phpmailer
        source: tests/smoke-composer.yaml
        version-requirement: '>6.8.0'
    source:
      provider: github
      repo: dependabot/smoke-tests
      directory: /composer
      commit: 509a98a45a6f933ffd49ca7f2c26815c693b3d76
  credentials:
    - host: github.com
      password: $LOCAL_GITHUB_ACCESS_TOKEN
      type: git_source
      username: x-access-token
output:
  - type: record_ecosystem_versions
    expect:
      data:
        ecosystem_versions:
          package_managers:
            composer: "2"
  - type: update_dependency_list
    expect:
      data:
        dependencies:
          - name: phpmailer/phpmailer
            requirements:
              - file: composer.json
                groups:
                  - runtime
                requirement: 5.2.2
                source:
                  type: git
                  url: https://github.com/PHPMailer/PHPMailer.git
            version: 5.2.2
          - name: phpstan/phpstan
            requirements:
              - file: composer.json
                groups:
                  - development
                requirement: 1.10.23
                source:
                  type: git
                  url: https://github.com/phpstan/phpstan.git
            version: 1.10.23
          - name: phpstan/phpstan-strict-rules
            requirements:
              - file: composer.json
                groups:
                  - development
                requirement: 1.5.0
                source:
                  type: git
                  url: https://github.com/phpstan/phpstan-strict-rules.git
            version: 1.5.0
        dependency_files:
          - /composer/composer.json
          - /composer/composer.lock
  - type: mark_as_processed
    expect:
      data:
        base-commit-sha: 509a98a45a6f933ffd49ca7f2c26815c693b3d76