command: update
input:
    job:
        command: update
        package-manager: bundler
        allowed-updates:
            - dependency-type: direct
              update-type: all
        dependency-groups:
            - name: ruleset
              rules:
                patterns:
                    - rack
                    - rubocop
        experiments:
            grouped-updates-prototype: true
            record-ecosystem-versions: true
        ignore-conditions:
            - dependency-name: rubocop
              source: tests/smoke-bundler-group-rules.yaml
              version-requirement: '>1.59.0'
        source:
            provider: github
            repo: dependabot/smoke-tests
            directory: /bundler
            commit: f558406ea0f067dcb5e223e257dcd91c27ea3a85
            hostname: github.com
            api-endpoint: https://api.github.com/
        commit-message-options: {}
        max-updater-run-time: 2700
    credentials:
        - host: github.com
          password: $LOCAL_GITHUB_ACCESS_TOKEN
          type: git_source
          username: x-access-token
output:
    - type: record_update_job_error
      expect:
        data:
            error-type: job_repo_not_found
            error-details:
                message: |-
                    Cloning into '/home/dependabot/dependabot-updater/repo'...
                    fatal: could not read Username for 'https://github.com': terminal prompts disabled
    - type: mark_as_processed
      expect:
        data:
            base-commit-sha: unknown
